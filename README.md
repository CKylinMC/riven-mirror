# Riven Mirror

> 此项目意为创建一个裂罅MOD的快捷鉴别工具

> 本项目目前处于DEMO阶段 很多功能不完善请注意

## 介绍

【WRM】裂罅之镜 - RivenMirror Alpha测试开启 - 紫卡评分，洗卡模拟

【宣传图】

功能介绍：

功能1. 紫卡评分

各位可能都蹲过交易频道，也自己洗过卡，结果发现有时候很难分辨一张紫卡的好坏，比如面对一张双暴和一张基伤单暴，没有试验过很难得知究竟该选择哪边。针对这个很久以前我曾经写过一个紫卡计算器，是通过EXCEL表格来实现的，长这样：

【图片：紫卡计算器V6截图】

虽说功能很全面，但是实际使用发现如果要算一张紫卡，步骤非常繁琐：首先要把自己紫卡的数值输入进去，然后还需要确认配卡是否正确，如果不正确还需要自己手动调整数值，不光麻烦、如果没有一定配卡经验的人根本无从下手，即使调整了也不知道自己调整的是否准确。

经过一段时间的思考，就有了制作这个软件（网站）的想法，经过半个月的爆肝，总算是写出了现在的这个版本。

也就是下面你看到的那样：

【图片：网站截图】

现在通过一系列自动化程序，让程序完成整个流程，效率上就快了很多，精度也高了很多。通过实现最佳紫卡生成的算法，也可以进行简单的评分计算，方便了各位评估一张紫卡是否有用。当然，这里的评估仅限于特定情况下的计算，如果一张紫卡加了很高的伤害，但是减很多射速，那么你可能会看到单发伤害有很高的评分，而持续和爆发则很低；亦或者一张霰弹紫卡加了很高的触发，但是由于触发本身很难反映到伤害上，因此评分不如全伤害的卡，这是很正常的事，所以这个评分大家参考着来看就好，具体情况还需要具体分析。

Q&A

Q：计算卡顿怎么办？
A：这是由于最佳紫卡生成算法的计算量很大（暂时没优化），目前可以通过选择一个限制元素类型来解决（默认是腐蚀）。

Q: 我要怎么输入自己的紫卡？
A: 通过OCR识别，现在已经可以实现读取紫卡截图，比如说像这样的：

【图片：PC截图】

或者这样的

【图片：手机拍照】

Q：我不要装重口径怎么办？
A：在右上区域是属性调整，可以调整包括是否使用重口径、筛选元素MOD、赋能和爆头几率在内的各种条件变量，未来会更加完善。

Q：限制MOD槽位是什么意思？
A：这个限制是针对某些武器，比如守望者P，可能需要装蓄力装填、耗竭装填，那么这2个MOD因为不参与计算，所以可能并不在自动配置的范围之中，这个时候将限制MOD槽位调到6，那么软件就只会计算6个槽位的MOD，剩下的槽位可以由你自行分配。

Q：手机怎么办？
A：可以拍照然后切换到文件模式上传图片进行识别，这里注意文件不要太大，不然可能上传失败哦。

Q：那个二维码是什么？
A：那是那张紫卡的信息，可以到手机上查看，未来可能会更完善。电脑上也可以直接粘贴

Q：我的紫卡带触发怎么办？
A：一部分触发是可以反映到伤害上的，比如切割、毒（气）以及火，但目前并没有做相关的编码，因此触发在计算时基本会被忽略。不过未来计划会支持这方面，比如手动配卡，触发速度优先等等。

功能2. 洗卡模拟

【图片：网站洗卡界面截图】

这个就不用说了吧，是欧洲人还是非洲人一试便知~

功能3. WF黄历

【图片】

这个是仿制程序员老黄历做的，纯属娱乐，大家看得开心就好。


以上~

因为目前仍在测试中，网址随时可能变化，所以就不在这里放网址了，也容易被度吞，进群获取网址才是正确姿势~

欢迎加入内测群：165371868

更多更新咨询，都会在里面发布哦。各位用户老爷们有什么意见也可以在里面提~

## 触发算法

首先要了解的是各属性算法不同

在物理实际触发几率的权重是元素4倍的情况下，紫卡负属性是否减武器的主物理成为了一个问题，如果专注触发腐蚀火毒毒气DOT，或者通过猎人切来输出切割伤害的话，武器本身的物理是可以去除的，这样可以提高元素的实际触发率，但由于减物理也降低了一部分伤害，因此要斟酌着计算。

理论上最强的元素组合是腐蚀病毒切割（有待验证），但由于腐蚀和病毒往往无法共存，一般使用病毒切或者腐蚀火的组合。

由于腐蚀本身没有伤害，因此在进行这种武器的评测是要选择一个特定的敌人来进行测试，这需要敌人的详细数据，包括血量护甲血肉类型等。

计算过程:

1. 引入一个元素顺序变量，与武器自带的元素合成后生成最终的元素列表，最多可有三个复合元素
2. 使用真实伤害模型来进行计算，以应用腐蚀等触发，病毒受护甲影响的具体公式尚未明了，但可以粗略计算为乘法增伤
3. 每个元素按权重来计算配比，这里再最佳紫卡计算时可以计算紫卡负物理的影响
4. 首先计算武器是否存在触发率跃迁，如果是则先填充满触发率，计算收益备用，（填充时使用所有可用的MOD，包括未在元素顺序表内的活动元素以及触媒联动等特殊MOD）
5. 按照正常线性计算计算，将最终结果与第3步计算结果比较，取最高值
6. 查看元素顺序和组成是否正确，进行替换和排序尽量替换成列表的元素




## 近期 TODO-LIST

- [x] 近战分析
  - [ ] ZAW分析
  - [ ] ZAW组装页面
- [ ] 武器配装页面
  - [ ] MOD手动选择
- [ ] MOD自动选择-> BAN PICK
- [ ] 首页
  - [ ] DE API
- [ ] 全局语言选择 (中文/英文)
- [ ] 触发计算
- [x] 英文识别


## 特性
- 输入
  - [x] MOD截图识别
  - [x] 文本输入
  - [ ] 手动选择属性
  - [ ] 随机Roll
  - [x] 二维码
- 编辑
  - [ ] 自主选卡
  - [ ] 确定个人卡库 -> 自动配卡
- 输出
  - [ ] 多方案比较 (正在做)
  - [ ] 派系伤害模拟
  - [x] 自动配卡
  - [x] 基准值评分

## change log


1.0.0 第一次发布

0.4.0 实现洗卡模拟

0.3.0 实现黄历

0.2.4 实现最佳紫卡生成

0.2.3 支持二维码 支持猎人战备

0.2.2 支持近战MOD

0.2.1 实现了元素类型限制 以及追随者MOD限制

0.2.0 demo2 实现了自动配卡标准输出

0.1.0 demo1 实现了mod截图识别
